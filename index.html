<!DOCTYPE html><html><head><meta http-equiv="Content-Type"content="text/html; charset=utf-8"/><title>afk</title><!--Babylon.js--><script src="https://cdnjs.cloudflare.com/ajax/libs/dat-gui/0.6.2/dat.gui.min.js"></script><script src="https://assets.babylonjs.com/generated/Assets.js"></script><script src="https://cdn.babylonjs.com/recast.js"></script><script src="https://cdn.babylonjs.com/earcut.min.js"></script><script src="https://cdn.babylonjs.com/babylon.js"></script><script src="https://cdn.babylonjs.com/gui/babylon.gui.min.js"></script><style>html,body{overflow:hidden;width:100%;height:100%;margin:0;padding:0;}#renderCanvas{width:100%;height:100%;touch-action:none;}#canvasZone{width:100%;height:100%;}</style></head><body><div id="canvasZone"><canvas id="renderCanvas"></canvas></div><script>var canvas=document.getElementById("renderCanvas");var startRenderLoop=function(engine,canvas){engine.runRenderLoop(function(){if(sceneToRender&&sceneToRender.activeCamera){sceneToRender.render();}});}
var engine=null;var scene=null;var sceneToRender=null;var createDefaultEngine=function(){return new BABYLON.Engine(canvas,true,{preserveDrawingBuffer:true,stencil:true,disableWebGL2Support:false});};var createScene=async function(){var scene=new BABYLON.Scene(engine);scene.clearColor=new BABYLON.Color3(0,0,0);var camera=new BABYLON.ArcRotateCamera("Camera",0,0,10,new BABYLON.Vector3(0,0,0),scene);camera.setPosition(new BABYLON.Vector3(0,0,-200));camera.attachControl(canvas,true);camera.lowerBetaLimit=0.1;camera.upperBetaLimit=(Math.PI/2)*0.99;camera.lowerRadiusLimit=150;const lightHemi=new BABYLON.HemisphericLight("light",new BABYLON.Vector3(0,1,0));lightHemi.intensity=2.0;const directionalLight=new BABYLON.DirectionalLight("directionalLight",new BABYLON.Vector3(0,1,0),scene);directionalLight.diffuse=new BABYLON.Color3(1,1,1);directionalLight.intensity=0.7;var fontData=await(await fetch("Andika_Bold.json")).json();var myText=BABYLON.MeshBuilder.CreateText("myText","AFK",fontData,{size:7,resolution:0,depth:5,sideOrientation:2});var fontDataTop=await(await fetch("Andika_Bold.json")).json();var myTextTop=BABYLON.MeshBuilder.CreateText("myTextTop","AFK",fontDataTop,{size:7,resolution:0,depth:0.01,sideOrientation:2});myText.position=new BABYLON.Vector3(50,30,-3.00);myTextTop.position=new BABYLON.Vector3(50,30,-5.51);myTextTop.setParent(myText);var wall=BABYLON.MeshBuilder.CreateGround("wall",{width:240,height:85},scene);wall.rotation.x=BABYLON.Tools.ToRadians(-90)
var floor=BABYLON.MeshBuilder.CreateGround("floor",{width:500,height:500},scene);floor.position.y=-38;var ceiling=BABYLON.MeshBuilder.CreateGround("ceiling",{width:240,height:240},scene);ceiling.position.y=72;ceiling.position.z=-116;let ceilingSlope=-165;ceiling.rotation.x=BABYLON.Tools.ToRadians(ceilingSlope);var wallMat=new BABYLON.StandardMaterial("wallMat",scene);wallMat.diffuseTexture=new BABYLON.Texture("texture/win_win.jpg",scene);wallMat.diffuseTexture.uScale=1;wallMat.diffuseTexture.vScale=1;wall.material=wallMat;var floorMat=new BABYLON.StandardMaterial("floorMat",scene);floorMat.diffuseTexture=new BABYLON.Texture("texture/marble.jpg",scene);floorMat.diffuseTexture.uScale=4;floorMat.diffuseTexture.vScale=4;floor.material=floorMat;var ceilingMat=new BABYLON.StandardMaterial("ceilingMat");ceilingMat.diffuseColor=new BABYLON.Color3(1,1,1);ceiling.material=ceilingMat;var pbr=new BABYLON.PBRMetallicRoughnessMaterial("pbr",scene);var pbr1=new BABYLON.PBRMetallicRoughnessMaterial("pbr1",scene);var pbr2=new BABYLON.PBRMetallicRoughnessMaterial("pbr2",scene);myText.material=pbr;myTextTop.material=pbr1;pbr.baseColor=new BABYLON.Color3(221/255,61/255,66/255);pbr.metallic=0.5;pbr.roughness=0.1;pbr.environmentTexture=BABYLON.CubeTexture.CreateFromPrefilteredData("texture/parkPathHDR.dds",scene);pbr1.baseColor=new BABYLON.Color3(0.5,0.5,0.5);pbr1.metallic=0.6;pbr1.roughness=0.1;pbr1.environmentTexture=BABYLON.CubeTexture.CreateFromPrefilteredData("texture/parkPathHDR.dds",scene);pbr2.baseColor=new BABYLON.Color3(0.5,0.5,0.5);pbr2.metallic=0.6;pbr2.roughness=0.1;pbr2.environmentTexture=BABYLON.CubeTexture.CreateFromPrefilteredData("texture/parkPathHDR.dds",scene);var matinviz=new BABYLON.StandardMaterial("matinviz",scene);matinviz.diffuseTexture=new BABYLON.Texture("texture/invisible.png",scene);matinviz.diffuseTexture.hasAlpha=true;matinviz.transparencyMode=BABYLON.Material.MATERIAL_ALPHATESTANDBLEND;matinviz.useAlphaFromDiffuseTexture=true;const lamelArray=[];const lamelHorizArray=[];let lamelLeftX=-70;let lamelTopY=41;let lamelDeepZ=-2;let lamelSize=87;let lamelLeftXHoriz=-71;let lamelBottomYHoriz=44;let lamelDeepZHoriz=-2;let lamelSizeHoriz=142;const outline=[new BABYLON.Vector3(-1,0,-2),new BABYLON.Vector3(1,0,-2),new BABYLON.Vector3(1,0,2),new BABYLON.Vector3(-1,0,2),];let lamelWidth=2;let lamelCount=33;let lamelStep=15;let lamelCountHoriz=20;let lamelStepHoriz=15;for(let i=0;i<lamelCount;i++){lamelArray[i]=BABYLON.MeshBuilder.ExtrudePolygon("lamel",{shape:outline,depth:lamelSize});lamelArray[i].position.set(i*lamelStep/3.5+lamelLeftX,lamelTopY,lamelDeepZ);lamelArray[i].material=matinviz;}
for(let i=0;i<lamelCountHoriz;i++){lamelHorizArray[i]=BABYLON.MeshBuilder.ExtrudePolygon("lamel",{shape:outline,depth:lamelSizeHoriz});lamelHorizArray[i].position.set(lamelLeftXHoriz,i*lamelStep/3.5-lamelBottomYHoriz,lamelDeepZHoriz);lamelHorizArray[i].rotation=new BABYLON.Vector3(0/2.0,0/2.0,Math.PI/2.0);lamelHorizArray[i].material=pbr1;}
const lamelArrayCeiling=[];const lamelHorizArrayCeiling=[];let lamelLeftXCeiling=-119;let lamelTopYCeiling=101;let lamelDeepZCeiling=-233;let lamelSizeCeiling=240;let lamelLeftXHorizCeiling=-119;let lamelBottomYHorizCeiling=100;let lamelDeepZHorizCeiling=-230;let lamelSizeHorizCeiling=240;const outlineCeiling=[new BABYLON.Vector3(-1,0,-2),new BABYLON.Vector3(1,0,-2),new BABYLON.Vector3(1,0,2),new BABYLON.Vector3(-1,0,2),];let lamelCountCeiling=55;let lamelStepCeiling=15;let lamelCountHorizCeiling=55;let lamelStepHorizCeiling=15;let sdvig=lamelStepCeiling/3.5+lamelWidth;let povorot=BABYLON.Tools.ToRadians(90+ceilingSlope);for(let i=0;i<lamelCountCeiling;i++){lamelArrayCeiling[i]=BABYLON.MeshBuilder.ExtrudePolygon("lamelCeiling",{shape:outlineCeiling,depth:lamelSizeCeiling});lamelArrayCeiling[i].position.set(i*lamelStepCeiling/3.4+lamelLeftXCeiling,lamelTopYCeiling,lamelDeepZCeiling);lamelArrayCeiling[i].rotation.x=BABYLON.Tools.ToRadians(90+ceilingSlope);lamelArrayCeiling[i].material=pbr2;}
for(let i=0;i<lamelCountCeiling;i++){lamelHorizArrayCeiling[i]=BABYLON.MeshBuilder.ExtrudePolygon("lamelCeiling",{shape:outlineCeiling,depth:lamelSizeHorizCeiling});lamelHorizArrayCeiling[i].position.set(lamelLeftXHorizCeiling,lamelBottomYHorizCeiling-i*Math.cos(povorot)*(lamelStepHorizCeiling/6.5+lamelWidth),lamelDeepZHorizCeiling-i*Math.sin(povorot)*(lamelStepHorizCeiling/6.5+lamelWidth));lamelHorizArrayCeiling[i].rotation=new BABYLON.Vector3(0/2.0,0/2.0,Math.PI/2.0);lamelHorizArrayCeiling[i].rotation.x=BABYLON.Tools.ToRadians(90+ceilingSlope);lamelHorizArrayCeiling[i].material=matinviz;}
let advancedTexture=BABYLON.GUI.AdvancedDynamicTexture.CreateFullscreenUI("GUI",true,scene);let loadedGUI=await advancedTexture.parseFromURLAsync("assets/guiTexture.json");let slider1=advancedTexture.getControlByName("Slider1");let slider3=advancedTexture.getControlByName("Slider3");let slider2=advancedTexture.getControlByName("Slider2");let slider4=advancedTexture.getControlByName("Slider4");let matPicker1=advancedTexture.getControlByName("ColorPicker1");let matPicker2=advancedTexture.getControlByName("ColorPicker2");let Textblock1=advancedTexture.getControlByName("Textblock1");let Textblock2=advancedTexture.getControlByName("Textblock2");slider1.onValueChangedObservable.add(function(value){if(lamelStep){for(let index=0;index<lamelHorizArray.length;++index){lamelHorizArray[index].material=matinviz;}
lamelStep=value;for(let i=0;i<lamelCount;i++){for(let j=0;j<lamelCount;j++){lamelArray[j].position.x=j*value/5+lamelLeftX;lamelArray[j].material=pbr1;if(lamelArray[j].position.x>70){lamelArray[j].material=matinviz;}
if(lamelArray[j].position.x<70){lamelArray[j].material=pbr1;}
Textblock1.text=Math.round(parseFloat((150-3*value)/14+6)*100000)/100;}}
console.log(value);}});slider3.onValueChangedObservable.add(function(value){if(lamelStepHoriz){for(let index=0;index<lamelArray.length;++index){lamelArray[index].material=matinviz;}
lamelStepHoriz=value;for(let i=0;i<lamelCountHoriz;i++){for(let j=0;j<lamelCountHoriz;j++){lamelHorizArray[j].position.y=j*value/5-lamelBottomYHoriz;lamelHorizArray[j].material=pbr1;if(lamelHorizArray[j].position.y>45){lamelHorizArray[j].material=matinviz;}
if(lamelHorizArray[j].position.y<45){lamelHorizArray[j].material=pbr1;}
Textblock1.text=Math.round(parseFloat((150-3*value)/14+6)*100000)/100;}}
console.log(value);}});slider2.onValueChangedObservable.add(function(value){if(lamelStepCeiling){for(let index=0;index<lamelHorizArrayCeiling.length;++index){lamelHorizArrayCeiling[index].material=matinviz;}
lamelStepCeiling=value;for(let i=0;i<lamelCountCeiling;i++){for(let j=0;j<lamelCountCeiling;j++){lamelArrayCeiling[j].position.x=j*value/5+lamelLeftXCeiling;lamelArrayCeiling[j].material=pbr2;if(lamelArrayCeiling[j].position.x>120){lamelArrayCeiling[j].material=matinviz;}
if(lamelArrayCeiling[j].position.x<120){lamelArrayCeiling[j].material=pbr2;}
Textblock2.text=Math.round(parseFloat((150-3*value)/14+6)*100000)/100;}}
console.log(value);}});slider4.onValueChangedObservable.add(function(value){if(lamelStepHorizCeiling){for(let index=0;index<lamelArrayCeiling.length;++index){lamelArrayCeiling[index].material=matinviz;}
lamelStepHorizCeiling=value;for(let i=0;i<lamelCountHorizCeiling;i++){for(let j=0;j<lamelCountHorizCeiling;j++){lamelHorizArrayCeiling[j].position.set(lamelLeftXHorizCeiling,lamelBottomYHorizCeiling-j*Math.cos(povorot)*(lamelStepHorizCeiling/5+lamelWidth),lamelDeepZHorizCeiling-j*Math.sin(povorot)*(lamelStepHorizCeiling/5+lamelWidth));lamelHorizArrayCeiling[j].rotation=new BABYLON.Vector3(0/2.0,0/2.0,Math.PI/2.0);lamelHorizArrayCeiling[j].rotation.x=BABYLON.Tools.ToRadians(90+ceilingSlope);if(lamelHorizArrayCeiling[j].position.y<40){lamelHorizArrayCeiling[j].material=matinviz;}
if(lamelHorizArrayCeiling[j].position.y>40){lamelHorizArrayCeiling[j].material=pbr2;}
Textblock2.text=Math.round(parseFloat((150-3*value)/14+6)*100000)/100;}}
console.log(value);}});matPicker1.onValueChangedObservable.add(function(value){pbr1.baseColor.copyFrom(value);console.log(value);});matPicker2.onValueChangedObservable.add(function(value){pbr2.baseColor.copyFrom(value);console.log(value);});scene.registerBeforeRender(()=>{});engine.runRenderLoop(()=>scene.render());return scene;};window.initFunction=async function(){var asyncEngineCreation=async function(){try{return createDefaultEngine();}catch(e){console.log("the available createEngine function failed. Creating the default engine instead");return createDefaultEngine();}}
window.engine=await asyncEngineCreation();if(!engine)throw'engine should not be null.';startRenderLoop(engine,canvas);window.scene=createScene();};initFunction().then(()=>{scene.then(returnedScene=>{sceneToRender=returnedScene;});});window.addEventListener("resize",function(){engine.resize();});</script></body></html>
